<div class="modal-dialog-background" *ngIf="(zichtbaar$ | async)" (click)="onClickOutside()">
  <div class="mat-dialog-container modal-dialog filter-dialog" (click)="onClickInside()">
    <div class="filter-header">
      <div class="filter-titel">{{ titel$ | async }} filter instellen</div>
      <mat-icon class="filter-sluit-button" (click)="close()">close</mat-icon>
    </div>

    <div class="filter-content">
      <div class="filter-naam">
        <mat-form-field class="filter-naam">
          <input type="text" placeholder="Omschrijving filter" matInput [formControl]="naamControl"/>
        </mat-form-field>
      </div>
      <div class="filter-definitie">
        <mat-form-field class="filter-velden-combo">
          <input type="text" placeholder="Eigenschap" matInput [formControl]="veldControl" [matAutocomplete]="velden"/>
          <mat-autocomplete #velden="matAutocomplete" autoActiveFirstOption [displayWith]="displayVeld">
            <mat-option *ngFor="let veld of (filteredVelden$ | async)" [value]="veld">{{ veld.label }}</mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="veldControl.invalid">{{ errorVeld() }}</mat-error>
        </mat-form-field>

        <mat-form-field class="filter-operator-combo">
          <input type="text" placeholder="Operator" matInput [formControl]="operatorControl" [matAutocomplete]="operatoren"/>
          <mat-autocomplete #operatoren="matAutocomplete" autoActiveFirstOption [displayWith]="displayOperator">
            <mat-option *ngFor="let operator of (filteredOperatoren$ | async)" [value]="operator">{{ operator.label }}</mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="operatorControl.invalid">{{errorOperator()}}</mat-error>
        </mat-form-field>

        <ng-container *ngIf="(veldwaardeType$ | async) as valueSelector">
          <ng-container [ngSwitch]="valueSelector.kind">
            <ng-container *ngSwitchCase="'free'" [ngSwitch]="valueSelector.valueType">

              <mat-form-field *ngSwitchCase="'string'" class="filter-waarde-editbox">
                <input type="text" matInput placeholder="Waarde" [formControl]="textWaardeControl"/>
                <mat-error *ngIf="textWaardeControl.invalid">{{errorTextWaarde()}}</mat-error>
              </mat-form-field>
              <span *ngSwitchCase="'string'" class="hoofdlettergevoeligheid">
                 <mat-checkbox  [formControl]="hoofdLetterGevoeligControl" (click)="onClickCheckbox()">
                    Hoofdlettergevoelig
                </mat-checkbox>
              </span>

              <mat-form-field *ngSwitchCase="'double'" class="filter-waarde-editbox">
                <input type="number" step="0.1" matInput placeholder="Getal" [formControl]="doubleWaardeControl"/>
                <mat-error *ngIf="doubleWaardeControl.invalid">{{errorDoubleWaarde()}}</mat-error>
              </mat-form-field>
              <span *ngSwitchCase="'double'" class="hoofdlettergevoeligheid"></span>

              <mat-form-field *ngSwitchCase="'integer'" class="filter-waarde-editbox">
                <input type="number" step="1" matInput placeholder="Getal" [formControl]="integerWaardeControl"/>
                <mat-error *ngIf="integerWaardeControl.invalid">{{errorIntegerWaarde()}}</mat-error>
              </mat-form-field>
              <span *ngSwitchCase="'integer'" class="hoofdlettergevoeligheid"></span>

            </ng-container>
            <ng-container *ngSwitchCase="'selection'" [ngSwitch]="valueSelector.selectionType">
              <mat-form-field *ngSwitchCase="'dropdown'" class="filter-waarde-dropdown">
                <mat-label>Kies een waarde</mat-label>
                <mat-select [formControl]="dropdownWaardeControl">
                  <mat-option *ngFor="let waarde of valueSelector.values" [value]="waarde">{{waarde}}</mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field *ngSwitchCase="'autocomplete'" class="filter-waarde-combo">
                <input type="text" placeholder="Waarde" matInput [formControl]="autocompleteWaardeControl" [matAutocomplete]="waarden"/>
                <mat-autocomplete #waarden="matAutocomplete" [displayWith]="displayAutocompleteWaarde">
                  <mat-option *ngFor="let waarde of (filteredWaarden$ | async)" [value]="waarde">{{waarde.value}}</mat-option>
                </mat-autocomplete>
                <mat-error *ngIf="autocompleteWaardeControl.invalid">{{errorAutocompleteWaarde()}}</mat-error>
              </mat-form-field>
              <span class="hoofdlettergevoeligheid"></span>
            </ng-container>
            <span *ngSwitchCase="'empty'" class="filter-waarde-editbox"></span>
          </ng-container>
        </ng-container>

        <div class="delete-icon">
          <button mat-icon-button (click)="verwijderActieveEditor()" matTooltip="Verwijder conditie">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <div class="query-builder">
        <awv-filter-query-builder [expressionEditor]="filterEditor$ | async"
                                  (expressionEditorUpdate)="onExpressionEditorUpdate($event)"></awv-filter-query-builder>
      </div>

    </div>

    <div class="filter-footer">
      <button mat-button class="filter-sluit-button" (click)="close()">
        Annuleer
      </button>

      <button mat-button color="primary" class="filter-pas-toe-button" (click)="onAction('pasFilterToe')" [disabled]="ongeldigeFilter$ | async">
        Pas toe
      </button>
    </div>
  </div>
</div>
