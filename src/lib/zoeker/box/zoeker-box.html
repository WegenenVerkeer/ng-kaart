<div class="kaart-widget">
  <div class="zoeker-input">

    <mat-menu #zoekerMenu="matMenu" class="zoeker-menu" [overlapTrigger]="false">
      <button mat-menu-item (click)="kiesZoeker('Geoloket')" [disabled]="actieveZoeker === 'Geoloket'">
        <mat-icon>search</mat-icon>
        <span>Zoek in geoloket</span>
      </button>
      <button mat-menu-item (click)="kiesZoeker('Perceel')" [disabled]="actieveZoeker === 'Perceel'">
        <mat-icon>search</mat-icon>
        <span>Zoek op Perceel</span>
      </button>
      <button mat-menu-item (click)="kiesZoeker('Crab')" [disabled]="actieveZoeker === 'Crab'">
        <mat-icon>search</mat-icon>
        <span>Zoek op CRAB</span>
      </button>
      <button mat-menu-item (click)="toggleHelp()" *ngIf="actieveZoeker === 'Geoloket'">
        <mat-icon>help</mat-icon>
        <span *ngIf="!toonHelp">Toon hulp bij zoeken</span>
        <span *ngIf="toonHelp">Verberg hulp bij zoeken</span>
      </button>
    </mat-menu>

    <button mat-icon-button [matMenuTriggerFor]="zoekerMenu" matTooltip="Toon zoekopties" matTooltipPosition="right">
      <mat-icon>menu</mat-icon>
    </button>
    <input placeholder="{{getPlaceholder()}}" [formControl]="zoekVeld" [readOnly]="this.actieveZoeker !== 'Geoloket'" (keyup)="onKey($event)" #zoekVeldElement>
    <div class="zoek-bezig-indicator" *ngIf="isBusy()">
      <mat-spinner diameter="20"></mat-spinner>
    </div>
    <button mat-icon-button (click)="kuisZoekOp()" *ngIf="zoekVeld.dirty" [matTooltip]="alleZoekResultaten.length > 0 ? 'Wis invoer en zoekresultaten' : 'Wis invoer'">
      <mat-icon>close</mat-icon>
    </button>
    <button mat-icon-button (click)="zoek()" matTooltip="Zoek of druk op &crarr;">
      <mat-icon>search</mat-icon>
    </button>
    <button mat-icon-button *ngIf="isInklapbaar()" (click)="toggleResultaat()" [matTooltip]="toonResultaat ? 'Verberg zoeken' : 'Toon zoeken'">
      <mat-icon *ngIf="toonResultaat">expand_less</mat-icon>
      <mat-icon *ngIf="!toonResultaat">expand_more</mat-icon>
    </button>
  </div>
  <awv-perceel-zoeker *ngIf="actieveZoeker === 'Perceel'" [hidden]="!toonResultaat"></awv-perceel-zoeker>
  <awv-crab-getrapt-zoeker *ngIf="actieveZoeker === 'Crab'" [hidden]="!toonResultaat"></awv-crab-getrapt-zoeker>
  <div class="divider" *ngIf="toonHelp && actieveZoeker === 'Geoloket'"></div>
  <div class="zoeker-help" *ngIf="toonHelp && actieveZoeker === 'Geoloket'">
    <div class="zoeker-help-header" (click)="toggleHelp()">
      <mat-icon>help</mat-icon>
      <div class="zoeker-help-titel">
        Hulp bij zoeken
      </div>
      <button mat-icon-button>
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="zoeker-subtitel">Voorbeelden</div>
    <div class="zoeker-help-content">
      <div>Kapelstraat 12 Kortrijk
        <br>&nbsp;&nbsp;
        <i>zoek het opgegeven adres</i>
      </div>
      <div>N0080001 12.0
        <br>&nbsp;&nbsp;
        <i>zoek op de weg met ident8 N0080001 het referentiepunt 12.0</i>
      </div>
      <div>R1
        <br>&nbsp;&nbsp;
        <i>zoek de weg met ident8 R0010001</i>
      </div>
      <div>N8 12.0
        <br>&nbsp;&nbsp;
        <i>zoek op de weg met ident8 N0080001 het referentiepunt 12.0</i>
      </div>
      <div>N8 12.0-8
        <br>&nbsp;&nbsp;
        <i>zoek op de weg met ident8 N0080001 het referentiepunt 12.0 met afstand -8</i>
      </div>
      <div>E17 5.0
        <br>&nbsp;&nbsp;
        <i>zoek op de E17 het referentiepunt 5.0</i>
      </div>
      <div>N8 178 Kortrijk
        <br>&nbsp;&nbsp;
        <i>zoek op de weg met ident8 N0080001 in Kortrijk huisnummer 178 (gemeente verplicht)</i>
      </div>
      <div>em G1586/WV
        <br>&nbsp;&nbsp;
        <i>zoek het EM onderdeel met 'G1586/WV' in het Naampad</i>
      </div>
      <div>kw 0.010.031.1
        <br>&nbsp;&nbsp;
        <i>zoek het kunstwerk met Bryggja id '0.010.031.1'</i>
      </div>
    </div>
    <div *ngIf="legende.size > 0">
      <div class="zoeker-subtitel">Legende</div>
      <div *ngFor="let key of legendeKeys" class="zoeker-resultaat">
        <span [ngSwitch]="legende.get(key).type">
          <mat-icon *ngSwitchCase="'svg'" class="zoeker-resultaat-icoon" [svgIcon]="legende.get(key).name"></mat-icon>
          <mat-icon *ngSwitchCase="'font'" class="zoeker-resultaat-icoon">{{legende.get(key).name}}</mat-icon>
        </span>
        <span>{{key}}</span>
      </div>
    </div>
  </div>
  <div *ngIf="toonResultaat && isInklapbaar()" class="divider"></div>
  <div class="zoeker-resultaat-box" *ngIf="toonResultaat" [@enterAnimation]>
    <div *ngFor="let resultaat of alleZoekResultaten" class="zoeker-resultaat" (click)="zoomNaarResultaat(resultaat)">
      <span [ngSwitch]="resultaat.icoon.type">
        <mat-icon *ngSwitchCase="'svg'" class="zoeker-resultaat-icoon" [svgIcon]="resultaat.icoon.name"></mat-icon>
        <mat-icon *ngSwitchCase="'font'" class="zoeker-resultaat-icoon">{{resultaat.icoon.name}}</mat-icon>
      </span>
      <span [innerHTML]="resultaat.omschrijving | highlight: zoekVeld.value"></span>
    </div>
    <div *ngIf="heeftFout()" class="divider"></div>
    <div *ngFor="let fout of alleFouten" class="zoeker-resultaat zoeker-fout" [@enterAnimation]>
      <mat-icon>announcement</mat-icon>
      <span>{{fout.zoeker}}: {{fout.fout}}</span>
    </div>
  </div>
</div>
